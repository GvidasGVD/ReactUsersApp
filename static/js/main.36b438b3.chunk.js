(this.webpackJsonpwebapp=this.webpackJsonpwebapp||[]).push([[0],{12:function(e,t,s){e.exports={header:"MainNavigation_header__1eTWp",logo:"MainNavigation_logo__2S30C",nav:"MainNavigation_nav__7QCTQ",active:"MainNavigation_active__3RUWq",linkToGit:"MainNavigation_linkToGit__3iPIP"}},22:function(e,t,s){e.exports={list:"UserList_list__28Q5_",sorting:"UserList_sorting__aEAuP"}},23:function(e,t,s){e.exports={item:"UserItem_item__zWGcH"}},26:function(e,t,s){e.exports={nousers:"NoUserFound_nousers__3Z54F"}},27:function(e,t,s){e.exports={card:"Card_card__1Z5RJ"}},29:function(e,t,s){e.exports={main:"Layout_main__3grmh"}},35:function(e,t,s){},4:function(e,t,s){e.exports={details:"UserDetails_details__2Lhh9",flex:"UserDetails_flex__2siVv",btnField:"UserDetails_btnField__31p68",detailsBtn:"UserDetails_detailsBtn__1GNfu",passwordInput:"UserDetails_passwordInput__2vedh",error_box:"UserDetails_error_box__36td-",error_title:"UserDetails_error_title__1Wj1T",error_message:"UserDetails_error_message__2tvP_",identity_field:"UserDetails_identity_field__3tngV"}},47:function(e,t,s){"use strict";s.r(t);var r=s(20),n=s.n(r),a=s(5),i=(s(35),s(2)),c=s(1),l=s.n(c),o=s(23),d=s.n(o),u=s(0),j=function(e){return Object(u.jsxs)("li",{className:d.a.item,children:[Object(u.jsxs)("figure",{children:[Object(u.jsxs)("blockquote",{children:[Object(u.jsx)("p",{children:e.name}),Object(u.jsx)("p",{children:e.surname})]}),Object(u.jsxs)("figcaption",{children:["Tel.: ",e.phone]}),Object(u.jsxs)("figcaption",{children:["Email: ",e.email]})]}),Object(u.jsx)(a.b,{className:"btn users_details_btn",to:"/ReactUsersApp/users/".concat(e.id),children:"View Details"})]})},b=s(22),p=s.n(b),h=l.a.createContext({persons:[],addUser:function(e){},removeUser:function(e){},editUser:function(e){}}),m=function(e){var t,s,r=Object(c.useContext)(h),n=Object(i.g)(),a=Object(i.h)(),l="asc"===new URLSearchParams(a.search).get("sort"),o=(t=r.persons,s=l,t.sort((function(e,t){return s?e.name>t.name?1:-1:e.name<t.name?1:-1}))),d=function(t){e.onInsertNewUser(t)};return Object(u.jsxs)(c.Fragment,{children:[Object(u.jsx)("div",{className:p.a.sorting,children:Object(u.jsxs)("button",{onClick:function(){n.push({pathname:a.pathname,search:"?sort=".concat(l?"desc":"asc")})},children:["Sort ",l?"Descending":"Ascending"]})}),Object(u.jsx)("ul",{className:p.a.list,children:o.map((function(e){return Object(u.jsx)(j,{id:e.id,name:e.name,surname:e.surname,phone:e.phone,email:e.email,onInsertNewUser:d},e.id)}))})]})},O=s(26),x=s.n(O),f=function(){return Object(u.jsxs)("div",{className:x.a.nousers,children:[Object(u.jsx)("p",{children:"No users found!"}),Object(u.jsx)(a.b,{className:"btn",to:"/ReactUsersApp/new-user",children:"Add New User"})]})},_=function(){return 0===Object(c.useContext)(h).persons.length?Object(u.jsx)(f,{}):Object(u.jsx)(m,{})},v=s(16),g=s(10),N=s(14),U=s.n(N),y=s(27),w=s.n(y);var R=function(e){return Object(u.jsx)("div",{className:w.a.card,children:e.children})},D=s(9),A=s.n(D),I=/^[a-zA-Z].*[\s\.]*$/,P=/^(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;function S(e){var t=e.name,s=e.surname,r=e.birth_date,n=e.email,a=e.password,i=e.phone,c=e.identity,l=e.passport_number,o={title:"",message:"",isValid:!0},d=function(e){return I.test(e)};0!==t.trim().length&&0!==s.trim().length&&0!==r.trim().length&&0!==n.trim().length&&0!==a.trim().length&&0!==c.trim().length||(o={title:"Invalid input",message:"Cannot insert empty values.",isValid:!1}),(t.length<2||t.length>20||!d(t))&&(o={title:"Invalid Name",message:"Name should be at least 2 symbols and not more than 20 symbols. Only letters allowed",isValid:!1}),(s.length<2||s.length>20||!d(s))&&(o={title:"Invalid Surname",message:"Surname should be at least 2 symbols and not more than 20 symbols. Only letters allowed",isValid:!1}),(a.length<6||a.length>15)&&(o={title:"Invalid Password",message:"Should be at least 6 symbols but not more than 15 symbols",isValid:!1}),(i.length<5||i.length>13)&&(o={title:"Invalid Phone number",message:"Should be at least 5 but not more than 13 digits ",isValid:!1}),"ID"!==c&&"Passport"!==c&&(o={title:"Identity error",message:"Only ID or Passport can be chosen ",isValid:!1}),(l.length<5||l.length>9)&&(o={title:"Invalid Passport number",message:"Should be at least 5 but not more than 9 digits ",isValid:!1}),new Date(r)>new Date&&(o={title:"Invalid Date of Birth",message:"Please insert valid date of birth",isValid:!1});return(!function(e){return P.test(e)}(n)||n.length>50)&&(o={title:"Invalid Email format",message:"Please check if email format is correct",isValid:!1}),o}var C=function(e,t,s){var r=Object(c.useState)(""),n=Object(g.a)(r,2),a=n[0],i=n[1],l=Object(c.useState)(!1),o=Object(g.a)(l,2),d=o[0],u=o[1],j=Object(c.useState)(!1),b=Object(g.a)(j,2),p=b[0],h=b[1],m=Object(c.useState)(!1),O=Object(g.a)(m,2),x=O[0],f=O[1];console.log(p);var _=e(a),v=!_&&d;return Object(c.useEffect)((function(){var e=setTimeout((function(){!t(a)&&d?h(!0):h(!1),!s(a)&&d?f(!0):f(!1)}),500);return function(){clearTimeout(e)}}),[a,d,t]),{value:a,hasError:v,hasLengthError:p,hasTypeError:x,isValid:_,valueChangeHandler:function(e){i(e.target.value)},inputBlurHandler:function(){u(!0)}}},E=/^[a-zA-Z].*[\s\.]*$/,V=function(e){var t=C((function(e){return""!==e.trim()}),(function(e){return e.length>=2&&e.length<=20}),(function(e){return E.test(e)})),s=t.value,r=(t.isValid,t.hasError),n=t.hasLengthError,a=t.hasTypeError,i=t.valueChangeHandler,l=t.inputBlurHandler,o=Object(c.useRef)(),d=Object(c.useRef)(),j=Object(c.useRef)(),b=Object(c.useRef)(),p=Object(c.useRef)(),h=Object(c.useRef)(),m=Object(c.useRef)(),O=Object(c.useRef)(),x=Object(c.useState)(),f=Object(g.a)(x,2),_=f[0],N=f[1],y=function(){var t=Object(v.a)(U.a.mark((function t(s){var r,n,a,i,c,l,u,x,f,_,v,g,y;return U.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(s.preventDefault(),r=o.current.value,n=d.current.value,a=j.current.value,i=b.current.value,c=p.current.value,l=h.current.value,u=m.current.value,x=O.current.value,f={id:"u"+(1e6*Math.random()).toFixed().toString(),name:r,surname:n,birth_date:a,email:i,password:c,phone:l,identity:u,passport_number:x},_=S(f),v=_.isValid,g=_.title,y=_.message,v){t.next=16;break}return N({title:g,message:y}),t.abrupt("return");case 16:e.onAddUser(f);case 17:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),w=r?Object(u.jsx)("p",{className:A.a.error_text,children:"Name must not be empty."}):n?Object(u.jsx)("p",{className:A.a.error_text,children:"At least 2 but not more than 20 letters."}):a?Object(u.jsx)("p",{className:A.a.error_text,children:"Only letters allowed."}):null;return Object(u.jsxs)(R,{children:[_&&Object(u.jsxs)("div",{className:A.a.error_box,children:[" ",Object(u.jsx)("div",{className:A.a.error_title,children:_.title}),Object(u.jsx)("div",{className:A.a.error_message,children:_.message})]}),Object(u.jsxs)("form",{className:A.a.form,onSubmit:y,children:[Object(u.jsxs)("div",{className:A.a.control,children:[Object(u.jsxs)("div",{children:[Object(u.jsx)("input",{type:"text",required:!0,id:"Name",ref:o,placeholder:"Name",title:"Name",value:s,onChange:i,onBlur:l}),w]}),Object(u.jsx)("div",{children:Object(u.jsx)("input",{type:"text",required:!0,id:"Surname",ref:d,placeholder:"Surname",title:"Surname"})})]}),Object(u.jsxs)("div",{className:A.a.control,children:[Object(u.jsx)("div",{children:Object(u.jsx)("input",{id:"email",type:"email",required:!0,ref:b,placeholder:"Email",title:"Email"})}),Object(u.jsx)("div",{children:Object(u.jsx)("input",{id:"password",type:"password",required:!0,ref:p,placeholder:"Password",title:"Password"})})]}),Object(u.jsxs)("div",{className:A.a.control,children:[Object(u.jsx)("div",{children:Object(u.jsx)("input",{id:"phone",type:"number",ref:h,placeholder:"Phone",title:"Phone"})}),Object(u.jsx)("div",{children:Object(u.jsx)("input",{id:"passportnumber",type:"number",ref:O,placeholder:"Passport/ID number",title:"Passport/ID number"})})]}),Object(u.jsxs)("div",{className:A.a.control,children:[Object(u.jsxs)("div",{children:[Object(u.jsx)("label",{htmlFor:"identity",children:"Identity"}),Object(u.jsxs)("select",{id:"identity",ref:m,children:[Object(u.jsx)("option",{value:"ID",defaultValue:!0,children:"ID"}),Object(u.jsx)("option",{value:"Passport",children:"Passport"})]})]}),Object(u.jsxs)("div",{children:[Object(u.jsx)("label",{htmlFor:"birthdate",children:"Birth Date"}),Object(u.jsx)("input",{type:"date",id:"birthdate",ref:j})]})]}),Object(u.jsx)("div",{className:A.a.actions,children:Object(u.jsx)("button",{children:"Add User"})})]})]})},k=function(){var e=Object(i.g)(),t=Object(c.useContext)(h);return Object(u.jsx)(V,{onAddUser:function(s){t.addUser(s),e.push("/ReactUsersApp/users")}})},F=s(4),B=s.n(F),T=s(28),q=(s(46),function(e){var t=Object(i.g)(),s=Object(c.useContext)(h),r=Object(c.useState)(!1),n=Object(g.a)(r,2),l=n[0],o=n[1],d=Object(c.useState)(),j=Object(g.a)(d,2),b=j[0],p=j[1],m=Object(c.useRef)(),O=Object(c.useRef)(),x=Object(c.useRef)(),f=Object(c.useRef)(),_=Object(c.useRef)(),N=Object(c.useRef)(),y=Object(c.useRef)(),w=Object(c.useRef)(),R=function(){o(!l)},D=function(){var t=Object(v.a)(U.a.mark((function t(s){var r,n,a,i,c,l,o,d,u,j,b,h,v;return U.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(s.preventDefault(),r=m.current.value?m.current.value:e.name,n=O.current.value?O.current.value:e.surname,a=x.current.value?x.current.value:e.birth_date,i=f.current.value?f.current.value:e.email,c=_.current.value?_.current.value:e.password,l=N.current.value?N.current.value:e.phone,o=y.current.value?y.current.value:e.identity,d=w.current.value?w.current.value:e.passport_number,u={id:e.id,name:r,surname:n,birth_date:a,email:i,password:c,phone:l,identity:o,passport_number:d},R(),j=S(u),b=j.isValid,h=j.title,v=j.message,b){t.next=17;break}return p({title:h,message:v}),t.abrupt("return");case 17:e.sendUpdateRequest(u,e.id);case 18:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),A=Object(u.jsx)("input",{type:"text",placeholder:e.name,ref:m}),I=Object(u.jsx)("input",{type:"text",placeholder:e.surname,ref:O}),P=Object(u.jsx)("input",{type:"date",ref:x}),C=Object(u.jsx)("input",{type:"email",placeholder:e.email,ref:f}),E=Object(u.jsx)("input",{type:"password",placeholder:"******",ref:_}),V=Object(u.jsx)("input",{type:"number",placeholder:e.phone,ref:N}),k=Object(u.jsxs)("select",{className:B.a.identity_field,id:"identity",ref:y,children:[Object(u.jsx)("option",{value:"ID",children:"ID"}),Object(u.jsx)("option",{value:"Passport",children:"Passport"})]}),F=Object(u.jsx)("input",{type:"number",placeholder:e.passport_number,ref:w});return Object(u.jsxs)("div",{className:B.a.details,children:[b&&Object(u.jsxs)("div",{className:B.a.error_box,children:[" ",Object(u.jsx)("div",{className:B.a.error_title,children:b.title}),Object(u.jsx)("div",{className:B.a.error_message,children:b.message})]}),Object(u.jsxs)("div",{className:B.a.flex,children:[Object(u.jsx)("p",{children:"Name: "}),Object(u.jsx)("p",{children:l?A:e.name})]}),Object(u.jsxs)("div",{className:B.a.flex,children:[Object(u.jsx)("p",{children:"Surname: "}),Object(u.jsx)("p",{children:l?I:e.surname})]}),Object(u.jsxs)("div",{className:B.a.flex,children:[Object(u.jsx)("p",{children:"Date of Birth: "}),Object(u.jsx)("p",{children:l?P:e.birth_date})]}),Object(u.jsxs)("div",{className:B.a.flex,children:[Object(u.jsx)("p",{children:"Email: "}),Object(u.jsx)("p",{children:l?C:e.email})]}),Object(u.jsxs)("div",{className:B.a.flex,children:[Object(u.jsx)("p",{children:"Password: "}),Object(u.jsx)("p",{children:l?E:"*****"})]}),Object(u.jsxs)("div",{className:B.a.flex,children:[Object(u.jsx)("p",{children:"Phone: "}),Object(u.jsx)("p",{children:l?V:e.phone})]}),Object(u.jsxs)("div",{className:B.a.flex,children:[Object(u.jsx)("p",{children:"Identity: "}),Object(u.jsx)("p",{children:l?k:e.identity})]}),Object(u.jsxs)("div",{className:B.a.flex,children:[Object(u.jsx)("p",{children:"Passport No: "}),Object(u.jsx)("p",{children:l?F:e.passport_number})]}),Object(u.jsxs)("div",{className:B.a.btnField,children:[Object(u.jsx)(a.b,{className:"btn ".concat(B.a.detailsBtn),to:"/ReactUsersApp/users",children:"Back"}),Object(u.jsx)("button",{className:"btn ".concat(B.a.detailsBtn),onClick:R,children:l?"Cancel editing":"Edit"}),l&&Object(u.jsx)("button",{className:"btn ".concat(B.a.detailsBtn),onClick:D,children:"Save"}),Object(u.jsx)("button",{className:"btn ".concat(B.a.detailsBtn),onClick:function(){Object(T.confirmAlert)({title:"Delete this user?",message:"",buttons:[{label:"Yes",onClick:function(){s.removeUser(e.id),t.push("/ReactUsersApp/users")}},{label:"No",onClick:function(){return""}}]})},children:"Delete User"})]})]})}),G=function(){var e=Object(c.useContext)(h),t=Object(i.i)().userId,s=e.persons.filter((function(e){return e.id.toString()===t.toString()}));return s[0].id?Object(u.jsx)(c.Fragment,{children:Object(u.jsx)(q,{id:t,name:s[0].name,surname:s[0].surname,birth_date:s[0].birth_date,email:s[0].email,password:s[0].password,phone:s[0].phone,identity:s[0].identity,passport_number:s[0].passport_number,sendUpdateRequest:function(t){e.editUser(t)}})}):Object(u.jsx)("p",{children:"No User found"})},M=s(29),W=s.n(M),L=s(12),H=s.n(L),Z=function(){return Object(u.jsxs)("header",{className:H.a.header,children:[Object(u.jsxs)("div",{className:H.a.logo,children:[Object(u.jsx)("span",{children:"Users Web App"}),Object(u.jsx)("a",{className:H.a.linkToGit,href:"https://github.com/GvidasGVD/ReactUsersApp/tree/master",target:"_blank",rel:"noopener noreferrer",children:"See code in GitHub"})]}),Object(u.jsx)("nav",{className:H.a.nav,children:Object(u.jsxs)("ul",{children:[Object(u.jsx)("li",{children:Object(u.jsx)(a.c,{to:"/ReactUsersApp/users",activeClassName:H.a.active,children:"All Users"})}),Object(u.jsx)("li",{children:Object(u.jsx)(a.c,{to:"/ReactUsersApp/new-user",activeClassName:H.a.active,children:"Add New User"})})]})})]})},z=function(e){return Object(u.jsxs)(c.Fragment,{children:[Object(u.jsx)(Z,{}),Object(u.jsx)("main",{className:W.a.main,children:e.children})]})},J=function(){return Object(u.jsx)("div",{className:"centered",children:Object(u.jsx)("p",{children:"Page not found!"})})},Q=s(30),$={persons:[{id:"u1",name:"Tom",surname:"Riddle",birth_date:"1964-12-30",email:"tomriddle@gmail.com",password:"a4da6sd7",phone:8675554687,identity:45,passport_number:46787987},{id:"u2",name:"Rick",surname:"Wangog",birth_date:"1967-12-30",email:"Wangog@gmail.com",password:"asdasdasd",phone:45647784,identity:456,passport_number:7898457}]},X=function(e,t){if("ADD"===t.type){var s=e.persons.findIndex((function(e){return e.id===t.person.id}));return e.persons[s]||!t.person.id?(alert("Cannot add person, contact administrator"),e.persons):{persons:e.persons.concat(t.person)}}if("REMOVE"===t.type)return{persons:e.persons.filter((function(e){return e.id!==t.id}))};if("UPDATE"===t.type){var r,n=e.persons.findIndex((function(e){return e.id===t.data.id}));return n>=0?((r=Object(Q.a)(e.persons))[n]=t.data,{persons:r}):void alert("Something went wrong, contact administrator")}return $},Y=function(e){var t=Object(c.useReducer)(X,$),s=Object(g.a)(t,2),r=s[0],n=s[1],a={persons:r.persons,addUser:function(e){n({type:"ADD",person:e})},removeUser:function(e){n({type:"REMOVE",id:e})},editUser:function(e){n({type:"UPDATE",data:e})}};return Object(u.jsx)(h.Provider,{value:a,children:e.children})};var K=function(){return Object(u.jsx)(Y,{children:Object(u.jsx)(z,{children:Object(u.jsxs)(i.d,{children:[Object(u.jsx)(i.b,{path:"/",exact:!0,children:Object(u.jsx)(i.a,{to:"/ReactUsersApp"})}),Object(u.jsx)(i.b,{path:"/ReactUsersApp",exact:!0,children:Object(u.jsx)(_,{})}),Object(u.jsx)(i.b,{path:"/ReactUsersApp/users/:userId",children:Object(u.jsx)(G,{})}),Object(u.jsx)(i.b,{path:"/ReactUsersApp/new-user",children:Object(u.jsx)(k,{})}),Object(u.jsx)(i.b,{path:"/ReactUsersApp/users",exact:!0,children:Object(u.jsx)(i.a,{to:"/ReactUsersApp"})}),Object(u.jsx)(i.b,{path:"*",children:Object(u.jsx)(J,{})})]})})})};n.a.render(Object(u.jsx)(a.a,{children:Object(u.jsx)(K,{})}),document.getElementById("root"))},9:function(e,t,s){e.exports={form:"NewUserForm_form__Rx8fj",control:"NewUserForm_control__3gtAJ",actions:"NewUserForm_actions__Ubfh9",error_box:"NewUserForm_error_box__15SWX",error_title:"NewUserForm_error_title__1bJSt",error_message:"NewUserForm_error_message__N5qno",error_text:"NewUserForm_error_text__2bEVh"}}},[[47,1,2]]]);
//# sourceMappingURL=main.36b438b3.chunk.js.map